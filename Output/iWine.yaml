openapi: 3.0.2
info:
  title: iWine
  description: " # Общие сведения\n\n**iWine** — умный графин для вина, который ум\
    еет сообщать следующую информацию о налитом в него вине:\n* объем;\n* содержан\
    ие алкоголя;\n* содержание сахара;\n* температуру;\n* тип вина — красное, бело\
    е, розовое, оранжевое (эта информация определяется с использованием алгоритмов\
    \ машинного обучения и сопровождается некоторым коэффициентом достоверности).\
    \ <br>\n\nКроме того, с графином можно производить следующие операции:\n* охла\
    дить или нагреть вино до определенной температуры;\n* взболтать вино для насыщ\
    ения его воздухом.\n\n# REST API\nREST API позволяет сторонним приложениям пол\
    учать информацию о вине и управлять графином. REST API работает по протоколу HTTP\
    \ и представляет собой набор методов, с помощью которых совершаются запросы и\
    \ возвращаются ответы для каждой операции. Все ответы приходят в виде JSON-стр\
    уктур.\n\nДля **iWine** имеется ограничение на количество отправляемых запросо\
    в — не более 5 запросов в секунду.\n\nREST API соответствует спецификации OpenAPI\
    \ 3.0.2 и описан в Swagger-интерфейсе, который можно использовать для разработ\
    ки и отладки.\n\nСсылки на запросы к API включают следующие URL:\n* [https://api.iwine.com](https://api.iwine.com)\
    \ — рабочий ресурс, используется для отправки реальных запросов;\n* [https://demoapi.iwine.com](https://demoapi.iwine.com)\
    \ — тестовый ресурс, используется для разработки и тестирования работы клиентс\
    кого приложения;\n* [http://localhost:5001](http://localhost:5001) — локальный\
    \ ресурс, используется для устройств, подключенных к той же локальной сети, чт\
    о и **iWine**.\n\n# Авторизация\n\n**iWine** использует авторизацию с помощью\
    \ API-ключа. Чтобы его получить, необходимо зарегистрироваться на странице [https://api.iwine.com/registration](https://api.iwine.com/registration).\
    \ После регистрации API-ключ будет отправлен на указанный электронный адрес. API-к\
    лючи всегда можно найти на странице учетной записи, где при необходимости можн\
    о сгенерировать дополнительные ключи.\n\nAPI-ключ передается в строке запроса\
    \ URL-адреса. Если запрос отправлен без API-ключа в строке запроса (или без де\
    йствительного ключа), сервер отклонит такой запрос.\n\nПример вызова:\n\n```https://api.iwine.com/wine/?appid=fd4698c940c6d1da602a70ac34f0b147```\n\
    \nВ примере в качестве значения параметра ```appid``` указан уникальный API-кл\
    юч пользователя.\n\n# Работа в Swagger-интерфейсе\nДанный Swagger-интерфейс со\
    держит описание конечных точек и позволяет выполнять запросы к API.\n\nПеред н\
    ачалом работы выберите ниже в выпадающем списке **Servers** нужный URL.\n\nВып\
    олните авторизацию:\n\n1. Нажмите справа кнопку **Authorise**.\n2. В открывшем\
    ся окне введите API-ключ и нажмите кнопку **Authorise**.\n\nВ результате метод\
    \ авторизации будет установлен для всех отправляемых запросов. Сессия авториза\
    ции закончится после обновления страницы пользователем.\n\nДля выполнения запр\
    оса к API:\n* Разверните описание конечной точки, запрос к которой хотите выпо\
    лнить, и нажмите кнопку **Try it out**.\n* Если конечная точка имеет параметры\
    , введите значения параметров.\n* Нажмите кнопку **Execute**.\nВ блоке **Responses**\
    \ отобразится результат запроса."
  version: 1.0.0
servers:
- url: https://api.iwine.com
- url: https://demoapi.iwine.com
- url: http://localhost:5001
security:
- app_id: []
tags:
- name: Свойства вина
paths:
  /wine:
    get:
      tags:
      - Свойства вина
      summary: Получить список свойств вина.
      description: "Конечная точка позволяет получить перечень всех свойств вина,\
        \ которые **iWine** может определить и отправить пользователю."
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /wine/volume:
    get:
      tags:
      - Свойства вина
      summary: Получить информацию об объеме налитого в графин вина.
      description: Информация об объеме вина может быть представлена в миллилитрах
        или граммах.
      parameters:
      - name: units
        in: query
        description: "Единица измерения для объема вина.\nВозможные значения:\n* *м\
          л* — миллилитры,\n* *г* — граммы.\n\nЕсли в запросе не указан параметр и\
          ли не указано значение параметра, то объем будет представлен в миллилитр\
          ах."
        required: false
        allowEmptyValue: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_1'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /wine/alcohol:
    get:
      tags:
      - Свойства вина
      summary: Получить информацию о содержании алкоголя в вине.
      description: Крепость вина выражена в процентах.
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_2'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /wine/sugar:
    get:
      tags:
      - Свойства вина
      summary: Получить информацию о содержании сахара в вине.
      description: Сладость вина выражена в граммах на литр (г/л).
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_3'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /wine/temperature:
    get:
      tags:
      - Свойства вина
      summary: Получить информацию о температуре вина.
      description: Информация о температуре может быть представлена в градусах Цельсия
        (°С) или градусах Фаренгейта (°F) или граммах.
      parameters:
      - name: degree
        in: query
        description: "Единица измерения температуры.\nВозможные значения:\n* *C* —\
          \ градусы Цельсия,\n* *F* — градусы Фаренгейта.\n\nЕсли в запросе не ука\
          зан параметр или не указано значение параметра, то температура будет пре\
          дставлена в градусах Цельсия."
        required: false
        allowEmptyValue: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_4'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /wine/type:
    get:
      tags:
      - Свойства вина
      summary: Получить информацию о типе вина.
      description: "Возможно определение следующих типов вина: красное, белое, роз\
        овое, оранжевое."
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_5'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /cooling:
    post:
      tags:
      - Операции с вином
      summary: Создать задачу на охлаждение вина.
      description: Конечная точка позволяет отправить запрос на охлаждение вина до
        заданной температуры.
      parameters:
      - name: t_cooling
        in: query
        description: "Температура, до которой нужно охладить вино.\n\nДопустим вво\
          д значений в диапазонах: *5–75*°С или *41–167*°F.\n\nЕсли текущая темпер\
          атура вина ниже температуры охлаждения, то сервер вернет ошибку 405."
        required: true
        style: form
        explode: true
        schema:
          type: integer
      - name: units
        in: query
        description: "Единица измерения температуры.\n\nВозможные значения:\n* *C*\
          \ — градусы Цельсия,\n* *F* — градусы Фаренгейта.\n\nЕсли в запросе не у\
          казан параметр или не указано значение параметра, то охлаждение будет вы\
          полнено до температуры в градусах Цельсия."
        required: false
        allowEmptyValue: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_6'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
        "405":
          description: Неверный ввод данных.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/405'
  /cooling/tasks/{taskID}:
    get:
      tags:
      - Операции с вином
      summary: Получить статус выполнения задачи на охлаждение вина.
      description: "Для получения статуса задачи в запросе должен быть передан иде\
        нтификатор поставленной задачи.\n\nВ случае успешного выполнения запроса в\
        озвращается значение статуса задачи:\n* *0* — создана,\n* *1* — идет выпол\
        нение,\n* *2* — успешно выполнена,\n* *3* — завершена с ошибками.\n\nНеобх\
        одимо выполнять отправку запроса в цикле до тех пор, пока статус имеет зна\
        чение *0* или *1*. После получения значения *2* или *3* следует обработать\
        \ результат выполнения задачи."
      parameters:
      - name: taskID
        in: path
        description: Идентификатор задачи.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_7'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /heating:
    post:
      tags:
      - Операции с вином
      summary: Создать задачу на подогрев вина.
      description: Конечная точка позволяет отправить запрос на подогрев вина до заданной
        температуры.
      parameters:
      - name: t_heating
        in: query
        description: "Температура, до которой нужно нагреть вино.\n\nДопустим ввод\
          \ значений в диапазонах: *5–75*°С или *41–167*°F.\n\nЕсли текущая темпер\
          атура вина выше температуры подогрева, то сервер вернет ошибку 405."
        required: true
        style: form
        explode: true
        schema:
          type: integer
      - name: units
        in: query
        description: "Единица измерения температуры.\n\nВозможные значения:\n* *C*\
          \ — градусы Цельсия,\n* *F* — градусы Фаренгейта.\n\nЕсли в запросе не у\
          казан параметр или не указано значение параметра, то подогрев будет выпо\
          лнен до температуры в градусах Цельсия."
        required: false
        allowEmptyValue: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_6'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
        "405":
          description: Неверный ввод данных.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/405'
  /heating/tasks/{taskID}:
    get:
      tags:
      - Операции с вином
      summary: Получить статус выполнения задачи на подогрев вина.
      description: "Для получения статуса задачи в запросе должен быть передан иде\
        нтификатор поставленной задачи.\n\nВ случае успешного выполнения запроса в\
        озвращается значение статуса задачи:\n* *0* — создана,\n* *1* — идет выпол\
        нение,\n* *2* — успешно выполнена,\n* *3* — завершена с ошибками.\n\nНеобх\
        одимо выполнять отправку запроса в цикле до тех пор, пока статус имеет зна\
        чение *0* или *1*. После получения значения *2* или *3* следует обработать\
        \ результат выполнения задачи."
      parameters:
      - name: taskID
        in: path
        description: Идентификатор задачи.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_8'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /stirring:
    post:
      tags:
      - Операции с вином
      summary: Создать задачу на взбалтывание вина.
      description: "Конечная точка позволяет отправить запрос на взбалтывание вина\
        , чтобы насытить его кислородом."
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_6'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
  /stirring/tasks/{taskID}:
    get:
      tags:
      - Операции с вином
      summary: Получить статус выполнения задачи на взбалтывание вина.
      description: "Для получения статуса задачи в запросе должен быть передан иде\
        нтификатор поставленной задачи.\n\nВ случае успешного выполнения запроса в\
        озвращается значение статуса задачи:\n* *0* — создана,\n* *1* — идет выпол\
        нение,\n* *2* — успешно выполнена,\n* *3* — завершена с ошибками.\n\nНеобх\
        одимо выполнять отправку запроса в цикле до тех пор, пока статус имеет зна\
        чение *0* или *1*. После получения значения *2* или *3* следует обработать\
        \ результат выполнения задачи."
      parameters:
      - name: taskID
        in: path
        description: Идентификатор задачи.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
      responses:
        "200":
          description: Запрос выполнен успешно.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_9'
        "400":
          description: "Неверный запрос. Этот ответ означает, что сервер не понима\
            ет запрос из-за неверного синтаксиса."
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/400'
        "404":
          description: Сервер не может найти запрашиваемый ресурс.
          content:
            text/plain:
              schema:
                $ref: '#/components/schemas/404'
components:
  schemas:
    "400":
      title: 400 Неверный запрос
      type: string
      example: Ошибка 400. Неверный запрос.
    "404":
      title: 404 Ресурс не найден
      type: string
      example: Ошибка 404. Сервер не может найти графин или графин пуст.
    "405":
      title: 405 Неверный ввод данных
      type: string
      example: Ошибка 405. Входные данные выходят за пределы разрешенного диапазона
        или не удовлетворяют условию выполнения задачи.
    inline_response_200:
      type: object
      properties:
        id:
          type: integer
          description: Идентификатор свойства
          example: 1
        name:
          type: string
          description: Наименование свойства
          example: Объем
    inline_response_200_1:
      type: object
      properties:
        volume:
          type: integer
          description: Объем
          example: 100
        unit:
          type: string
          description: Единица измерения
          example: мл
    inline_response_200_2:
      type: object
      properties:
        percent:
          type: integer
          description: Процент алкоголя
          example: 12
    inline_response_200_3:
      type: object
      properties:
        sweet:
          type: integer
          description: Количество сахара
          example: 40
    inline_response_200_4:
      type: object
      properties:
        volume:
          type: integer
          description: Объем
          example: 100
        unit:
          type: string
          description: Единица измерения
          example: °С
    inline_response_200_5:
      type: object
      properties:
        color:
          type: string
          description: Тип вина
          example: Белое
    inline_response_200_6:
      type: object
      properties:
        taskID:
          type: integer
          description: Идентификатор задачи
          example: 15
    inline_response_200_7:
      type: object
      properties:
        cooling_status:
          type: integer
          description: Статус задачи
          example: 0
        cooling_message:
          type: string
          description: Описание статуса
          example: Задача выполнена
    inline_response_200_8:
      type: object
      properties:
        heating_status:
          type: integer
          description: Статус задачи
          example: 0
        heating_message:
          type: string
          description: Описание статуса
          example: Задача выполнена
    inline_response_200_9:
      type: object
      properties:
        stirring_status:
          type: integer
          description: Статус задачи
          example: 0
        stirring_message:
          type: string
          description: Описание статуса
          example: Задача выполнена
  securitySchemes:
    app_id:
      type: apiKey
      description: API-ключ для авторизации запросов.
      name: appid
      in: query
